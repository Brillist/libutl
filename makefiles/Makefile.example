####################################################################################################
### Makefile for examples  #########################################################################
####################################################################################################

ifeq ($(SRCROOT),)
    SRCROOT = ..
endif

####################################################################################################

all:
	@if [ ! -f .depend ]; then $(MAKE) depend; fi
	@$(MAKE) exes

####################################################################################################

include $(SRCROOT)/makefiles/Makefile.build
include $(SRCROOT)/makefiles/Makefile.common

####################################################################################################

INST_EXDIR	= $(INST_ROOT)share/libutl/examples/
EXES		= $(foreach file, $(CPPS), $(basename $(file)))

####################################################################################################

exes:		$(EXES)

####################################################################################################

clean:
	@$(CMD_CLEAN)
	@rm -f $(EXES)

####################################################################################################

depend:
	@rm -f .depend*
	@if [ "$(CPPS)" != "" ]; then \
		$(CC) $(CC_OPTS) -M *.cpp > .depend; \
	fi

####################################################################################################

distclean:
	@$(CMD_CLEAN)
	@rm -f $(EXES)
	@$(CMD_DISTCLEAN)

####################################################################################################

install:
	@install -d $(INST_EXDIR)
	@if [ "$(EXES)" != "" ]; then cp -v $(EXES) $(INST_EXDIR); fi

####################################################################################################

% :             %.o $(UTL_LIBS)
	@echo linking $@
	@$(LD) -static-libgcc -o $@ $< $(LD_OPTS)
